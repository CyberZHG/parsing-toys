import{i as H}from"./navbar-DcTHfFKV.js";import{R as b,s as v,a as V,g as I}from"./__vite-browser-external-XlBbu2m0.js";import{s as C,a as S}from"./display_svg-Danp339a.js";const L=document.querySelector("#regex-input"),F=document.querySelector("#button-convert"),A=document.querySelector("#error-container"),R=document.querySelector("#error-message"),N=document.querySelector("#nfa-container"),p=document.querySelector("#nfa-tbody"),w=document.querySelector("#nfa-svg"),T=document.querySelector("#dfa-container"),u=document.querySelector("#dfa-tbody"),E=document.querySelector("#dfa-svg"),q=document.querySelector("#min-dfa-container"),x=document.querySelector("#min-dfa-tbody"),k=document.querySelector("#min-dfa-svg");function B(n){p.innerHTML="";const s=new Set;for(let e=0;e<n.numEdges();e++)s.add(n.edgeLabel(e));const c=Array.from(s).sort(),r=p.parentElement.querySelector("thead tr");for(;r.children.length>2;)r.removeChild(r.lastChild);for(const e of c){const t=document.createElement("th");t.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center font-semibold text-gray-900 dark:text-gray-100",t.textContent=e,r.appendChild(t)}const d=new Map;for(let e=0;e<n.numEdges();e++){const t=n.edgeFrom(e),o=n.edgeTo(e),a=n.edgeLabel(e);d.has(t)||d.set(t,new Map);const l=d.get(t);l.has(a)||l.set(a,[]),l.get(a).push(o)}for(let e=0;e<n.size();e++){const o=n.stateAt(e).match(/^(\d+) \((\w+)\)$/),a=o?o[1]:String(e),l=o?o[2]:"",i=document.createElement("tr");i.className=e%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900";const y=document.createElement("td");y.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",y.textContent=a,i.appendChild(y);const m=document.createElement("td");m.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",m.textContent=l,i.appendChild(m);const g=d.get(e)||new Map;for(const G of c){const f=document.createElement("td");f.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center";const M=g.get(G)||[];f.textContent=M.length>0?`{${M.join(", ")}}`:"",i.appendChild(f)}p.appendChild(i)}}function K(n){u.innerHTML="";const s=new Set;for(let e=0;e<n.numEdges();e++)s.add(n.edgeLabel(e));const c=Array.from(s).sort(),r=u.parentElement.querySelector("thead tr");for(;r.children.length>3;)r.removeChild(r.lastChild);for(const e of c){const t=document.createElement("th");t.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center font-semibold text-gray-900 dark:text-gray-100",t.textContent=e,r.appendChild(t)}const d=new Map;for(let e=0;e<n.numEdges();e++){const t=n.edgeFrom(e),o=n.edgeTo(e),a=n.edgeLabel(e);d.has(t)||d.set(t,new Map),d.get(t).set(a,o)}for(let e=0;e<n.size();e++){const t=document.createElement("tr");t.className=e%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900";const o=document.createElement("td");o.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",o.textContent=n.stateIdAt(e),t.appendChild(o);const a=document.createElement("td");a.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",a.textContent=`{${n.stateKeyAt(e)}}`,t.appendChild(a);const l=document.createElement("td");l.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",l.textContent=n.stateTypeAt(e),t.appendChild(l);const i=d.get(e)||new Map;for(const y of c){const m=document.createElement("td");m.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center";const g=i.get(y);m.textContent=g!==void 0?String(g):"",t.appendChild(m)}u.appendChild(t)}}function h(n,s){const r=new DOMParser().parseFromString(s,"image/svg+xml");n.innerHTML=r.documentElement.innerHTML,n.setAttribute("viewBox",r.documentElement.getAttribute("viewBox"))}F.addEventListener("click",()=>{const n=L.value,s=new b;if(!s.parse(n)){R.textContent=s.errorMessage(),A.hidden=!1,N.hidden=!0,T.hidden=!0,q.hidden=!0,v(n);return}A.hidden=!0;const c=H(),r=s.toNFA(),d=b.toNFAGraph(r);B(d),h(w,d.toSVG(c)),N.hidden=!1;const e=b.toDFA(r),t=b.toDFAGraph(e);K(t),h(E,t.toSVG(c)),T.hidden=!1;const o=b.toMinDFA(e),a=b.toDFAGraph(o);$(a),h(k,a.toSVG(c)),q.hidden=!1,r.delete(),e.delete(),o.delete(),v(n)});function $(n){x.innerHTML="";const s=new Set;for(let e=0;e<n.numEdges();e++)s.add(n.edgeLabel(e));const c=Array.from(s).sort(),r=x.parentElement.querySelector("thead tr");for(;r.children.length>3;)r.removeChild(r.lastChild);for(const e of c){const t=document.createElement("th");t.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center font-semibold text-gray-900 dark:text-gray-100",t.textContent=e,r.appendChild(t)}const d=new Map;for(let e=0;e<n.numEdges();e++){const t=n.edgeFrom(e),o=n.edgeTo(e),a=n.edgeLabel(e);d.has(t)||d.set(t,new Map),d.get(t).set(a,o)}for(let e=0;e<n.size();e++){const t=document.createElement("tr");t.className=e%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900";const o=document.createElement("td");o.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",o.textContent=n.stateIdAt(e),t.appendChild(o);const a=document.createElement("td");a.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",a.textContent=`{${n.stateKeyAt(e)}}`,t.appendChild(a);const l=document.createElement("td");l.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center",l.textContent=n.stateTypeAt(e),t.appendChild(l);const i=d.get(e)||new Map;for(const y of c){const m=document.createElement("td");m.className="border border-gray-300 dark:border-gray-600 px-3 py-2 text-center";const g=i.get(y);m.textContent=g!==void 0?String(g):"",t.appendChild(m)}x.appendChild(t)}}V();C(w);S(w,"#nfa-download-svg","#nfa-download-png","nfa");C(E);S(E,"#dfa-download-svg","#dfa-download-png","dfa");C(k);S(k,"#min-dfa-download-svg","#min-dfa-download-png","min-dfa");const D=I();D&&(L.value=D);F.click();
