import"./__vite-browser-external-BgPlA5PU.js";import{s as C}from"./choose_examples-BjAtfSqC.js";import{g as L,s as F,a as b}from"./cfg_editor-Bof7UeYh.js";import{u as v,s as M}from"./cfg_result-CcZunNg_.js";import{C as H,a as N,s as q,g as y}from"./location_hash-DCeX6uqc.js";import{s as G,a as w}from"./display_svg-Danp339a.js";function P(){try{const e=y();if(!e)return{grammar:""};const t=JSON.parse(e);return{grammar:t.grammar||"",input:t.input||""}}catch{return{grammar:y(),input:""}}}function V(e){q(JSON.stringify(e))}const A={example1:"Example 1: E -> T E'  E' -> + T E' | ε  T -> F T'  T' -> * F T' | ε  F -> ( E ) | id",example2:"Example 2: S -> i E t S S' | a  S' -> e S | ε  E -> b"},O={example1:`E -> T E'
E' -> + T E' | ε
T -> F T'
T' -> * F T' | ε
F -> ( E ) | id`,example2:`S -> i E t S S' | a
S' -> e S | ε
E -> b`},k={example1:"id + id * id",example2:"i b t a e a"},p="¥",h=document.querySelector("#button-cfg-ll1"),g=document.querySelector("#mtable-container"),D=document.querySelector("#mtable"),m=document.querySelector("#input-string"),c=document.querySelector("#ll-steps-container"),E=document.querySelector("#ll-steps-tbody"),d=document.querySelector("#parse-tree-container"),u=document.querySelector("#parse-tree-svg");function B(e){const t=e.numNonTerminals(),a=e.numTerminals();let s='<thead><tr class="bg-gray-100">';s+='<th class="border border-gray-300 px-2 py-1"></th>';for(let r=0;r<a;r++)s+=`<th class="border border-gray-300 px-2 py-1">${e.getTerminal(r)}</th>`;s+="</tr></thead>";let o="<tbody>";for(let r=0;r<t;r++){const n=e.getNonTerminal(r);o+=`<tr><td class="border border-gray-300 px-2 py-1 font-semibold bg-gray-50">${n}</td>`;for(let i=0;i<a;i++){const l=e.getTerminal(i),T=e.getCell(n,l,"<br>"),x=e.hasConflictAt(n,l);let f="border border-gray-300 px-2 py-1 text-center";x&&(f+=" bg-red-100 text-red-800"),o+=`<td class="${f}">${T}</td>`}o+="</tr>"}o+="</tbody>",D.innerHTML=s+o,g.hidden=!1}function $(e){E.innerHTML="";for(let t=0;t<e.size();t++){const a=document.createElement("tr");a.className=t%2===0?"bg-white":"bg-gray-50";const s=document.createElement("td");s.className="border border-gray-300 px-3 py-2 text-center",s.textContent=String(t+1);const o=document.createElement("td");o.className="border border-gray-300 px-3 py-2",o.textContent=e.getStack(t).join(" ");const r=document.createElement("td");r.className="border border-gray-300 px-3 py-2 text-right",r.textContent=e.getRemainingInputs(t).join(" ");const n=document.createElement("td");n.className="border border-gray-300 px-3 py-2";const i=e.getAction(t);n.textContent=i,i.startsWith("conflict")||i.startsWith("error")?n.classList.add("text-red-600"):i==="accept"&&n.classList.add("text-green-600","font-semibold"),a.appendChild(s),a.appendChild(o),a.appendChild(r),a.appendChild(n),E.appendChild(a)}}h.addEventListener("click",()=>{const e=document.querySelector("#cfg-ll1-error-message"),t=new H,a=L();if(t.parse(a))if(t.terminals().includes(p))e.textContent="The "+p+" symbol is used as the end-of-input marker; please do not use it in the grammar.",e.parentElement.hidden=!1,g.hidden=!0,c.hidden=!0,d.hidden=!0;else{if(t.leftRecursionElimination(),t.leftFactoring(),v(t.toString(),t.terminals(),t.nonTerminals()),t.nonTerminals().length>0){const s=t.computeLL1Table();B(s);const o=m.value.trim();if(o){const r=s.parse(o);$(r),c.hidden=!1;const n=r.getParseTree();if(n){const l=new DOMParser().parseFromString(n.toSVG(),"image/svg+xml");n.delete(),u.innerHTML=l.documentElement.innerHTML,u.setAttribute("viewBox",l.documentElement.getAttribute("viewBox")),d.hidden=!1}else d.hidden=!0}else c.hidden=!0,d.hidden=!0}e.parentElement.hidden=!0}else e.textContent=t.errorMessage(),e.parentElement.hidden=!1,g.hidden=!0,c.hidden=!0,d.hidden=!0;V({grammar:a,input:m.value.trim()})});function j(e){b(O[e]),m.value=k[e],h.click()}document.querySelector("#cfg-editor-intro").innerHTML=`
  Context free grammar input:
  <div class="text-gray-500 font-light text-sm">
    <ul>
      <li>The first symbol encountered in the grammar definition is treated as the start symbol</li>
      <li>Left recursion elimination and left factoring are applied automatically</li>
      <li>The <code>${p}</code> symbol is used as the end-of-input marker; please do not use it in the grammar.</li>
    </ul>
  </div>
`;C(A,j);F();M();N();G(u);w(u,"#parse-tree-download-svg","#parse-tree-download-png","parse-tree");const S=P();b(S.grammar);m.value=S.input||"";h.click();
