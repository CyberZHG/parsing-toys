import{i as b}from"./navbar-KfbvFhEg.js";import{s as M}from"./choose_examples-vr6Go3Mf.js";import{g as G,s as C,a as T}from"./cfg_editor-Bof7UeYh.js";import{C as F,a as A,s as H,g as f}from"./__vite-browser-external-BsK2uhbd.js";import{s as x,a as v}from"./display_svg-Danp339a.js";import{r as V,a as q}from"./action_goto_table-bSxHmSSv.js";function w(){try{const e=f();if(!e)return{grammar:""};const t=JSON.parse(e);return{grammar:t.grammar||"",input:t.input||""}}catch{return{grammar:f(),input:""}}}function P(e){H(JSON.stringify(e))}const D={example1:"Example 1: S -> S S + | S S * | a",example2:"Example 2: E -> E + T | T  T -> T * F | F  F -> ( E ) | id"},k={example1:`S -> S S + 
   | S S * 
   | a`,example2:`E -> E + T | T
T -> T * F | F
F -> ( E ) | id`},B={example1:"a a + a a + *",example2:"id * ( id + id )"},u=document.querySelector("#button-cfg-slr1"),a=document.querySelector("#automaton-svg"),E=document.querySelector("#action-goto-table-container"),o=document.querySelector("#input-string"),r=document.querySelector("#lr-steps-container"),n=document.querySelector("#parse-tree-container"),s=document.querySelector("#parse-tree-svg");u.addEventListener("click",()=>{const e=document.querySelector("#cfg-slr1-error-message"),t=new F,c=G();if(t.parse(c))if(t.terminals().includes("¥"))e.textContent="The ¥ symbol is used as the end-of-input marker; please do not use it in the grammar.",e.parentElement.hidden=!1,E.hidden=!0,r.hidden=!0,n.hidden=!0;else{if(t.nonTerminals().length>0){const l=b(),d=t.computeSLR1Automaton(),p=new DOMParser,g=p.parseFromString(d.toSVG(l),"image/svg+xml");a.innerHTML=g.documentElement.innerHTML,a.setAttribute("viewBox",g.documentElement.getAttribute("viewBox"));const i=t.computeSLR1ActionGotoTable(d);V(t,i);const S=o.value.trim();if(S){const y=i.parse(S);q(y),r.hidden=!1;const m=i.getParseTree();if(m){const h=p.parseFromString(m.toSVG(l),"image/svg+xml");m.delete(),s.innerHTML=h.documentElement.innerHTML,s.setAttribute("viewBox",h.documentElement.getAttribute("viewBox")),n.hidden=!1}else n.hidden=!0}else r.hidden=!0,n.hidden=!0}e.parentElement.hidden=!0}else e.textContent=t.errorMessage(),e.parentElement.hidden=!1,E.hidden=!0,r.hidden=!0,n.hidden=!0;P({grammar:c,input:o.value.trim()})});function O(e){T(k[e]),o.value=B[e],u.click()}document.querySelector("#cfg-editor-intro").innerHTML=`
  Context free grammar input:
  <div class="text-gray-500 font-light text-sm">
    <ul>
      <li>The first symbol encountered in the grammar definition is treated as the start symbol</li>
      <li>The <code>¥</code> symbol is used as the end-of-input marker; please do not use it in the grammar.</li>
    </ul>
  </div>
`;M(D,O);C();A();x(a);v(a);x(s);v(s,"#parse-tree-download-svg","#parse-tree-download-png","parse-tree");const L=w();T(L.grammar);o.value=L.input||"";u.click();
