import"./__vite-browser-external-BgPlA5PU.js";import{s as M}from"./choose_examples-BjAtfSqC.js";import{g as k,s as L,a as B}from"./cfg_editor-Bof7UeYh.js";import{u as G,s as H}from"./cfg_result-CcZunNg_.js";import{C as P,a as q,s as w,g as F}from"./location_hash-BZG2E5jj.js";import{s as N,a as V}from"./display_svg-Danp339a.js";function D(){try{const r=F();if(!r)return{grammar:""};const t=JSON.parse(r);return{grammar:t.grammar||"",input:t.input||""}}catch{return{grammar:F(),input:""}}}function C(r){w(JSON.stringify(r))}const R={example1:"Example 1: S -> A B  A -> a | epsilon  B -> b | epsilon",example2:"Example 2: S -> a S b | a b",example3:"Example 3: E -> E + T | T  T -> T * F | F  F -> ( E ) | id",example4:"Example 4: S -> A  A -> B  B -> a"},O={example1:`S -> A B
A -> a | ε
B -> b | ε`,example2:"S -> a S b | a b",example3:`E -> E + T | T
T -> T * F | F
F -> ( E ) | id`,example4:`S -> A
A -> B
B -> a`},j={example1:"a b",example2:"a a b b",example3:"id + id * id",example4:"a"},b=document.querySelector("#button-cfg-cnf"),A=document.querySelector("#button-cfg-cyk"),S=document.querySelector("#input-string"),x=document.querySelector("#cyk-table-container"),$=document.querySelector("#cyk-table"),f=document.querySelector("#cyk-result-container"),a=document.querySelector("#cyk-result-text"),s=document.querySelector("#parse-tree-container"),i=document.querySelector("#parse-tree-svg");let d=null;b.addEventListener("click",()=>{const r=document.querySelector("#cfg-cyk-error-message"),t=new P,m=k();t.parse(m)?(t.toChomskyNormalForm(),d=t,G(t.toString(),t.terminals(),t.nonTerminals()),r.parentElement.hidden=!0):(r.textContent=t.errorMessage(),r.parentElement.hidden=!1,d=null),x.hidden=!0,f.hidden=!0,s.hidden=!0,C({grammar:m,input:S.value.trim()})});A.addEventListener("click",()=>{const r=document.querySelector("#cfg-cyk-error-message");if(d||b.click(),!d){x.hidden=!0,f.hidden=!0,s.hidden=!0;return}const t=S.value.trim(),m=t.split(/\s+/).filter(e=>e.length>0),c=m.length;if(c===0&&t.length===0){const e=d.cykParse(""),l=e.isAccepted();if(x.hidden=!0,f.hidden=!1,l){a.textContent="Accepted (empty string)",a.className="text-green-600";const n=e.getParseTree();if(n){const y=new DOMParser().parseFromString(n.toSVG(),"image/svg+xml");n.delete(),i.innerHTML=y.documentElement.innerHTML,i.setAttribute("viewBox",y.documentElement.getAttribute("viewBox")),s.hidden=!1}else s.hidden=!0}else a.textContent="Rejected (empty string not accepted)",a.className="text-red-600",s.hidden=!0;r.parentElement.hidden=!0,C({grammar:k(),input:t});return}const E=d.cykParse(t),u=E.isAccepted();let p='<thead><tr class="bg-gray-100">';p+='<th class="border border-gray-300 px-2 py-1"></th>';for(let e=0;e<c;++e)p+=`<th class="border border-gray-300 px-2 py-1">${m[e]}</th>`;p+="</tr></thead>";let o="<tbody>";for(let e=c;e>=1;--e){o+="<tr>",o+=`<td class="border border-gray-300 px-2 py-1 text-center bg-gray-50 font-semibold">${e}</td>`;for(let l=0;l<c;++l){const n=l,g=n+e-1;if(g<c){const y=E.getCellString(n,g,", "),v=n===0&&g===c-1;let T="border border-gray-300 px-2 py-1 text-center";v&&u?T+=" bg-green-100 text-green-800":v&&!u&&(T+=" bg-red-100 text-red-800"),o+=`<td class="${T}">${y}</td>`}else o+='<td class="border border-gray-300 px-2 py-1 bg-gray-200"></td>'}o+="</tr>"}if(o+="</tbody>",$.innerHTML=p+o,x.hidden=!1,f.hidden=!1,u?(a.textContent="Accepted",a.className="text-green-600"):(a.textContent="Rejected",a.className="text-red-600"),u){const e=E.getParseTree();if(e){const n=new DOMParser().parseFromString(e.toSVG(),"image/svg+xml");e.delete(),i.innerHTML=n.documentElement.innerHTML,i.setAttribute("viewBox",n.documentElement.getAttribute("viewBox")),s.hidden=!1}else s.hidden=!0}else s.hidden=!0;r.parentElement.hidden=!0,C({grammar:k(),input:t})});function J(r){B(O[r]),S.value=j[r],b.click(),A.click()}M(R,J);L();H();q();N(i);V(i,"#parse-tree-download-svg","#parse-tree-download-png","parse-tree");const h=D();B(h.grammar);S.value=h.input||"";h.grammar&&(b.click(),h.input&&A.click());
