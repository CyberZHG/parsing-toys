import{i as C}from"./navbar-KfbvFhEg.js";import{s as L}from"./choose_examples-vr6Go3Mf.js";import{g as k,s as M,a as E}from"./cfg_editor-Bof7UeYh.js";import{u as F,s as v}from"./cfg_result-BlwN4V3V.js";import{C as H,a as N,s as q,g as y}from"./__vite-browser-external-CVGcIm8v.js";import{s as G,a as w}from"./display_svg-Danp339a.js";function P(){try{const e=y();if(!e)return{grammar:""};const t=JSON.parse(e);return{grammar:t.grammar||"",input:t.input||""}}catch{return{grammar:y(),input:""}}}function V(e){q(JSON.stringify(e))}const A={example1:"Example 1: E -> E + T | T  T -> T * F | F  F -> ( E ) | id",example2:"Example 2: S -> i E t S | i E t S e S | a  E -> b"},D={example1:`E -> E + T | T
T -> T * F | F
F -> ( E ) | id`,example2:`S -> i E t S
   | i E t S e S
   | a
E -> b`},O={example1:"id + id * id",example2:"i b t a e a"},g="Â¥",h=document.querySelector("#button-cfg-ll1"),f=document.querySelector("#mtable-container"),B=document.querySelector("#mtable"),m=document.querySelector("#input-string"),c=document.querySelector("#ll-steps-container"),x=document.querySelector("#ll-steps-tbody"),l=document.querySelector("#parse-tree-container"),u=document.querySelector("#parse-tree-svg");function $(e){const t=e.numNonTerminals(),a=e.numTerminals();let o='<thead><tr class="bg-gray-100 dark:bg-gray-700 font-mono">';o+='<th class="border border-gray-300 px-2 py-1"></th>';for(let r=0;r<a;r++)o+=`<th class="border border-gray-300 px-2 py-1">${e.getTerminal(r)}</th>`;o+="</tr></thead>";let s="<tbody>";for(let r=0;r<t;r++){const n=e.getNonTerminal(r);s+=`<tr class="dark:bg-gray-600 font-mono"><td class="border border-gray-300 px-2 py-1 font-semibold text-center bg-gray-50 dark:bg-gray-700">${n}</td>`;for(let i=0;i<a;i++){const p=e.getTerminal(i),d=e.getCell(n,p,"<br>"),T=e.hasConflictAt(n,p);let b="border border-gray-300 px-2 py-1 text-center";T&&(b+=" bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200"),s+=`<td class="${b}">${d}</td>`}s+="</tr>"}s+="</tbody>",B.innerHTML=o+s,f.hidden=!1}function j(e){x.innerHTML="";for(let t=0;t<e.size();t++){const a=document.createElement("tr");a.className=t%2===0?"bg-white dark:bg-gray-600":"bg-gray-50 dark:bg-gray-700";const o=document.createElement("td");o.className="border border-gray-300 px-3 py-2 text-center",o.textContent=String(t+1);const s=document.createElement("td");s.className="border border-gray-300 px-3 py-2",s.textContent=e.getStack(t).join(" ");const r=document.createElement("td");r.className="border border-gray-300 px-3 py-2 text-right",r.textContent=e.getRemainingInputs(t).join(" ");const n=document.createElement("td");n.className="border border-gray-300 px-3 py-2";const i=e.getAction(t);n.textContent=i,i.startsWith("conflict")||i.startsWith("error")?n.classList.add("text-red-600","dark:text-green-400"):i==="accept"&&n.classList.add("text-green-600","dark:text-green-400","font-semibold"),a.appendChild(o),a.appendChild(s),a.appendChild(r),a.appendChild(n),x.appendChild(a)}}h.addEventListener("click",()=>{const e=document.querySelector("#cfg-ll1-error-message"),t=new H,a=k();if(t.parse(a))if(t.terminals().includes(g))e.textContent="The "+g+" symbol is used as the end-of-input marker; please do not use it in the grammar.",e.parentElement.hidden=!1,f.hidden=!0,c.hidden=!0,l.hidden=!0;else{if(t.leftRecursionElimination(),t.leftFactoring(!1),F(t.toString(),t.terminals(),t.nonTerminals()),t.nonTerminals().length>0){const o=t.computeLL1Table();$(o);const s=m.value.trim();if(s){const r=o.parse(s);j(r),c.hidden=!1;const n=o.getParseTree();if(n){const i=C(),d=new DOMParser().parseFromString(n.toSVG(i),"image/svg+xml");n.delete(),u.innerHTML=d.documentElement.innerHTML,u.setAttribute("viewBox",d.documentElement.getAttribute("viewBox")),l.hidden=!1}else l.hidden=!0}else c.hidden=!0,l.hidden=!0}e.parentElement.hidden=!0}else e.textContent=t.errorMessage(),e.parentElement.hidden=!1,f.hidden=!0,c.hidden=!0,l.hidden=!0;V({grammar:a,input:m.value.trim()})});function R(e){E(D[e]),m.value=O[e],h.click()}document.querySelector("#cfg-editor-intro").innerHTML=`
  Context free grammar input:
  <div class="text-gray-500 font-light text-sm">
    <ul>
      <li>The first symbol encountered in the grammar definition is treated as the start symbol</li>
      <li>Left recursion elimination and left factoring are applied automatically</li>
      <li>The <code>${g}</code> symbol is used as the end-of-input marker; please do not use it in the grammar.</li>
    </ul>
  </div>
`;L(A,R);M();v();N();G(u);w(u,"#parse-tree-download-svg","#parse-tree-download-png","parse-tree");const S=P();E(S.grammar);m.value=S.input||"";h.click();
