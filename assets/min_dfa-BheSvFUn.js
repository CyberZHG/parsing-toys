import"./__vite-browser-external-BgPlA5PU.js";import{R as u,s as A,a as V,g as I}from"./location_hash-BZG2E5jj.js";import{s as C,a as S}from"./display_svg-Danp339a.js";const F=document.querySelector("#regex-input"),G=document.querySelector("#button-convert"),T=document.querySelector("#error-container"),R=document.querySelector("#error-message"),N=document.querySelector("#nfa-container"),b=document.querySelector("#nfa-tbody"),w=document.querySelector("#nfa-svg"),q=document.querySelector("#dfa-container"),g=document.querySelector("#dfa-tbody"),E=document.querySelector("#dfa-svg"),L=document.querySelector("#min-dfa-container"),x=document.querySelector("#min-dfa-tbody"),v=document.querySelector("#min-dfa-svg");function B(n){b.innerHTML="";const a=new Set;for(let e=0;e<n.numEdges();e++)a.add(n.edgeLabel(e));const c=Array.from(a).sort(),r=b.parentElement.querySelector("thead tr");for(;r.children.length>2;)r.removeChild(r.lastChild);for(const e of c){const t=document.createElement("th");t.className="border border-gray-300 px-3 py-2 text-center font-semibold",t.textContent=e,r.appendChild(t)}const d=new Map;for(let e=0;e<n.numEdges();e++){const t=n.edgeFrom(e),o=n.edgeTo(e),s=n.edgeLabel(e);d.has(t)||d.set(t,new Map);const l=d.get(t);l.has(s)||l.set(s,[]),l.get(s).push(o)}for(let e=0;e<n.size();e++){const o=n.stateAt(e).match(/^(\d+) \((\w+)\)$/),s=o?o[1]:String(e),l=o?o[2]:"",i=document.createElement("tr"),f=document.createElement("td");f.className="border border-gray-300 px-3 py-2 text-center",f.textContent=s,i.appendChild(f);const m=document.createElement("td");m.className="border border-gray-300 px-3 py-2 text-center",m.textContent=l,i.appendChild(m);const p=d.get(e)||new Map;for(const H of c){const y=document.createElement("td");y.className="border border-gray-300 px-3 py-2 text-center";const M=p.get(H)||[];y.textContent=M.length>0?`{${M.join(", ")}}`:"",i.appendChild(y)}b.appendChild(i)}}function K(n){g.innerHTML="";const a=new Set;for(let e=0;e<n.numEdges();e++)a.add(n.edgeLabel(e));const c=Array.from(a).sort(),r=g.parentElement.querySelector("thead tr");for(;r.children.length>3;)r.removeChild(r.lastChild);for(const e of c){const t=document.createElement("th");t.className="border border-gray-300 px-3 py-2 text-center font-semibold",t.textContent=e,r.appendChild(t)}const d=new Map;for(let e=0;e<n.numEdges();e++){const t=n.edgeFrom(e),o=n.edgeTo(e),s=n.edgeLabel(e);d.has(t)||d.set(t,new Map),d.get(t).set(s,o)}for(let e=0;e<n.size();e++){const t=document.createElement("tr"),o=document.createElement("td");o.className="border border-gray-300 px-3 py-2 text-center",o.textContent=n.stateIdAt(e),t.appendChild(o);const s=document.createElement("td");s.className="border border-gray-300 px-3 py-2 text-center",s.textContent=`{${n.stateKeyAt(e)}}`,t.appendChild(s);const l=document.createElement("td");l.className="border border-gray-300 px-3 py-2 text-center",l.textContent=n.stateTypeAt(e),t.appendChild(l);const i=d.get(e)||new Map;for(const f of c){const m=document.createElement("td");m.className="border border-gray-300 px-3 py-2 text-center";const p=i.get(f);m.textContent=p!==void 0?String(p):"",t.appendChild(m)}g.appendChild(t)}}function h(n,a){const r=new DOMParser().parseFromString(a,"image/svg+xml");n.innerHTML=r.documentElement.innerHTML,n.setAttribute("viewBox",r.documentElement.getAttribute("viewBox"))}G.addEventListener("click",()=>{const n=F.value,a=new u;if(!a.parse(n)){R.textContent=a.errorMessage(),T.hidden=!1,N.hidden=!0,q.hidden=!0,L.hidden=!0,A(n);return}T.hidden=!0;const c=a.toNFA(),r=u.toNFAGraph(c);B(r),h(w,r.toSVG()),N.hidden=!1;const d=u.toDFA(c),e=u.toDFAGraph(d);K(e),h(E,e.toSVG()),q.hidden=!1;const t=u.toMinDFA(d),o=u.toDFAGraph(t);$(o),h(v,o.toSVG()),L.hidden=!1,c.delete(),d.delete(),t.delete(),A(n)});function $(n){x.innerHTML="";const a=new Set;for(let e=0;e<n.numEdges();e++)a.add(n.edgeLabel(e));const c=Array.from(a).sort(),r=x.parentElement.querySelector("thead tr");for(;r.children.length>3;)r.removeChild(r.lastChild);for(const e of c){const t=document.createElement("th");t.className="border border-gray-300 px-3 py-2 text-center font-semibold",t.textContent=e,r.appendChild(t)}const d=new Map;for(let e=0;e<n.numEdges();e++){const t=n.edgeFrom(e),o=n.edgeTo(e),s=n.edgeLabel(e);d.has(t)||d.set(t,new Map),d.get(t).set(s,o)}for(let e=0;e<n.size();e++){const t=document.createElement("tr"),o=document.createElement("td");o.className="border border-gray-300 px-3 py-2 text-center",o.textContent=n.stateIdAt(e),t.appendChild(o);const s=document.createElement("td");s.className="border border-gray-300 px-3 py-2 text-center",s.textContent=`{${n.stateKeyAt(e)}}`,t.appendChild(s);const l=document.createElement("td");l.className="border border-gray-300 px-3 py-2 text-center",l.textContent=n.stateTypeAt(e),t.appendChild(l);const i=d.get(e)||new Map;for(const f of c){const m=document.createElement("td");m.className="border border-gray-300 px-3 py-2 text-center";const p=i.get(f);m.textContent=p!==void 0?String(p):"",t.appendChild(m)}x.appendChild(t)}}V();C(w);S(w,"#nfa-download-svg","#nfa-download-png","nfa");C(E);S(E,"#dfa-download-svg","#dfa-download-png","dfa");C(v);S(v,"#min-dfa-download-svg","#min-dfa-download-png","min-dfa");const D=I();D&&(F.value=D);G.click();
