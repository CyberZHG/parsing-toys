import"./__vite-browser-external-BgPlA5PU.js";import{s as y}from"./choose_examples-BjAtfSqC.js";import{g as b,s as G,a as E}from"./cfg_editor-Bof7UeYh.js";import{C,a as F,s as M,g as h}from"./location_hash-DCeX6uqc.js";import{s as T,a as x}from"./display_svg-Danp339a.js";import{r as A,a as H}from"./action_goto_table-ox6zrwL9.js";function V(){try{const e=h();if(!e)return{grammar:""};const t=JSON.parse(e);return{grammar:t.grammar||"",input:t.input||""}}catch{return{grammar:h(),input:""}}}function q(e){M(JSON.stringify(e))}const w={example1:"Example 1: S -> S S + | S S * | a",example2:"Example 2: E -> E + T | T  T -> T * F | F  F -> ( E ) | id"},P={example1:`S -> S S + 
   | S S * 
   | a`,example2:`E -> E + T | T
T -> T * F | F
F -> ( E ) | id`},D={example1:"a a + a a + *",example2:"id * ( id + id )"},u=document.querySelector("#button-cfg-slr1"),a=document.querySelector("#automaton-svg"),f=document.querySelector("#action-goto-table-container"),o=document.querySelector("#input-string"),r=document.querySelector("#lr-steps-container"),n=document.querySelector("#parse-tree-container"),s=document.querySelector("#parse-tree-svg");u.addEventListener("click",()=>{const e=document.querySelector("#cfg-slr1-error-message"),t=new C,c=b();if(t.parse(c))if(t.terminals().includes("¥"))e.textContent="The ¥ symbol is used as the end-of-input marker; please do not use it in the grammar.",e.parentElement.hidden=!1,f.hidden=!0,r.hidden=!0,n.hidden=!0;else{if(t.nonTerminals().length>0){const l=t.computeSLR1Automaton(),d=new DOMParser,p=d.parseFromString(l.toSVG(),"image/svg+xml");a.innerHTML=p.documentElement.innerHTML,a.setAttribute("viewBox",p.documentElement.getAttribute("viewBox"));const i=t.computeSLR1ActionGotoTable(l);A(t,i);const g=o.value.trim();if(g){const L=i.parse(g);H(L),r.hidden=!1;const m=i.getParseTree();if(m){const S=d.parseFromString(m.toSVG(),"image/svg+xml");m.delete(),s.innerHTML=S.documentElement.innerHTML,s.setAttribute("viewBox",S.documentElement.getAttribute("viewBox")),n.hidden=!1}else n.hidden=!0}else r.hidden=!0,n.hidden=!0}e.parentElement.hidden=!0}else e.textContent=t.errorMessage(),e.parentElement.hidden=!1,f.hidden=!0,r.hidden=!0,n.hidden=!0;q({grammar:c,input:o.value.trim()})});function B(e){E(P[e]),o.value=D[e],u.click()}document.querySelector("#cfg-editor-intro").innerHTML=`
  Context free grammar input:
  <div class="text-gray-500 font-light text-sm">
    <ul>
      <li>The first symbol encountered in the grammar definition is treated as the start symbol</li>
      <li>The <code>¥</code> symbol is used as the end-of-input marker; please do not use it in the grammar.</li>
    </ul>
  </div>
`;y(w,B);G();F();T(a);x(a);T(s);x(s,"#parse-tree-download-svg","#parse-tree-download-png","parse-tree");const v=V();E(v.grammar);o.value=v.input||"";u.click();
