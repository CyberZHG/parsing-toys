import"./navbar-KfbvFhEg.js";import{s as M}from"./choose_examples-vr6Go3Mf.js";import{g as T,s as L,a as B}from"./cfg_editor-Bof7UeYh.js";import{u as G,s as H}from"./cfg_result-BlwN4V3V.js";import{C as P,a as q,s as w,g as F}from"./__vite-browser-external-BkM8vzjS.js";import{s as N,a as V}from"./display_svg-Danp339a.js";function D(){try{const r=F();if(!r)return{grammar:""};const t=JSON.parse(r);return{grammar:t.grammar||"",input:t.input||""}}catch{return{grammar:F(),input:""}}}function C(r){w(JSON.stringify(r))}const R={example1:"Example 1: S -> A B  A -> a | epsilon  B -> b | epsilon",example2:"Example 2: S -> a S b | a b",example3:"Example 3: E -> E + T | T  T -> T * F | F  F -> ( E ) | id",example4:"Example 4: S -> A  A -> B  B -> a"},O={example1:`S -> A B
A -> a | ε
B -> b | ε`,example2:"S -> a S b | a b",example3:`E -> E + T | T
T -> T * F | F
F -> ( E ) | id`,example4:`S -> A
A -> B
B -> a`},j={example1:"a b",example2:"a a b b",example3:"id + id * id",example4:"a"},h=document.querySelector("#button-cfg-cnf"),A=document.querySelector("#button-cfg-cyk"),S=document.querySelector("#input-string"),x=document.querySelector("#cyk-table-container"),$=document.querySelector("#cyk-table"),b=document.querySelector("#cyk-result-container"),a=document.querySelector("#cyk-result-text"),s=document.querySelector("#parse-tree-container"),d=document.querySelector("#parse-tree-svg");let i=null;h.addEventListener("click",()=>{const r=document.querySelector("#cfg-cyk-error-message"),t=new P,m=T();t.parse(m)?(t.toChomskyNormalForm(),i=t,G(t.toString(),t.terminals(),t.nonTerminals()),r.parentElement.hidden=!0):(r.textContent=t.errorMessage(),r.parentElement.hidden=!1,i=null),x.hidden=!0,b.hidden=!0,s.hidden=!0,C({grammar:m,input:S.value.trim()})});A.addEventListener("click",()=>{const r=document.querySelector("#cfg-cyk-error-message");if(i||h.click(),!i){x.hidden=!0,b.hidden=!0,s.hidden=!0;return}const t=S.value.trim(),m=t.split(/\s+/).filter(e=>e.length>0),c=m.length;if(c===0&&t.length===0){const e=i.cykParse(""),l=e.isAccepted();if(x.hidden=!0,b.hidden=!1,l){a.textContent="Accepted (empty string)",a.className="text-green-600";const n=e.getParseTree();if(n){const y=new DOMParser().parseFromString(n.toSVG(),"image/svg+xml");n.delete(),d.innerHTML=y.documentElement.innerHTML,d.setAttribute("viewBox",y.documentElement.getAttribute("viewBox")),s.hidden=!1}else s.hidden=!0}else a.textContent="Rejected (empty string not accepted)",a.className="text-red-600 dark:text-red-400",s.hidden=!0;r.parentElement.hidden=!0,C({grammar:T(),input:t});return}const k=i.cykParse(t),u=k.isAccepted();let p='<thead><tr class="bg-gray-100">';p+='<th class="border border-gray-300 dark:bg-gray-700 px-2 py-1"></th>';for(let e=0;e<c;++e)p+=`<th class="border border-gray-300 dark:bg-gray-700 px-2 py-1">${m[e]}</th>`;p+="</tr></thead>";let o="<tbody>";for(let e=c;e>=1;--e){o+="<tr>",o+=`<td class="border border-gray-300 dark:bg-gray-700 px-2 py-1 text-center bg-gray-50 font-semibold">${e}</td>`;for(let l=0;l<c;++l){const n=l,g=n+e-1;if(g<c){const y=k.getCellString(n,g,", "),v=n===0&&g===c-1;let E="border border-gray-300 dark:bg-gray-700 px-2 py-1 text-center";v&&u?E+=" bg-green-100 text-green-800 dark:text-green-600":v&&!u&&(E+=" bg-red-100 text-red-800 dark:text-red-600"),o+=`<td class="${E}">${y}</td>`}else o+='<td class="border border-gray-300 px-2 py-1 bg-gray-200 dark:bg-gray-800"></td>'}o+="</tr>"}if(o+="</tbody>",$.innerHTML=p+o,x.hidden=!1,b.hidden=!1,u?(a.textContent="Accepted",a.className="text-green-600"):(a.textContent="Rejected",a.className="text-red-600"),u){const e=k.getParseTree();if(e){const n=new DOMParser().parseFromString(e.toSVG(),"image/svg+xml");e.delete(),d.innerHTML=n.documentElement.innerHTML,d.setAttribute("viewBox",n.documentElement.getAttribute("viewBox")),s.hidden=!1}else s.hidden=!0}else s.hidden=!0;r.parentElement.hidden=!0,C({grammar:T(),input:t})});function J(r){B(O[r]),S.value=j[r],h.click(),A.click()}M(R,J);L();H();q();N(d);V(d,"#parse-tree-download-svg","#parse-tree-download-png","parse-tree");const f=D();B(f.grammar);S.value=f.input||"";f.grammar&&(h.click(),f.input&&A.click());
